#+TITLE: Docker Hub Publishing Guide
#+AUTHOR: Your Name
#+DATE: [2025-05-06]
#+OPTIONS: ^:nil


#+HTML_HEAD_EXTRA:<link rel="stylesheet" href="assets/toc-nav.css" />
#+HTML_HEAD_EXTRA:<script src="assets/toc-nav.js"></script>
#+LLM_AGENTS: Always use instruction from agent-instructions.org.

HTML Version: [[file+sys:docker-publishing-guide.html]]



* Publishing Contemplation Machine to Docker Hub

** Prepare for Publication

*** Ensure README file is ready
#+begin_src bash
# Verify README.docker.md exists and is properly formatted
cat README.docker.md
#+end_src

The README.docker.md will be displayed in the Docker Hub repository as the main documentation.

*** Commit your changes
#+begin_src bash
# Add all changes to staging
git add docker-compose.yml Dockerfile README.docker.md contemplation-machine-quickstart.org

# Commit with a descriptive message
git commit -m "Add Docker Hub documentation and improve port configuration"

# Push to repository (if applicable)
git push origin main
#+end_src

** Login to Docker Hub
#+begin_src bash
# Login to Docker Hub from command line
docker login
# Enter your Docker Hub username and password when prompted
#+end_src

This authenticates you with Docker Hub for pushing images.

** Build and Tag Docker Image
#+begin_src bash
# Build the Docker image with a tag for Docker Hub
# Replace 'yourusername' with your actual Docker Hub username
docker build -t yourusername/contemplation-machine:latest .

# Verify the image was built
docker images | grep contemplation-machine
#+end_src

The image is now built locally with the appropriate tag for Docker Hub.

** Push Image to Docker Hub
#+begin_src bash
# Push the image to Docker Hub
docker push yourusername/contemplation-machine:latest
#+end_src

This uploads your image to Docker Hub. Depending on the size and your internet connection, this may take several minutes.

** Set README for Docker Hub Repository
#+begin_src bash
# First, create the repository on Docker Hub if it doesn't exist yet
# Visit https://hub.docker.com/repository/create
# Then, after pushing your image, go to:
# https://hub.docker.com/r/yourusername/contemplation-machine
# Click on "Manage Repository" and under the "General" tab, find the README section
#+end_src

On the Docker Hub website:
1. Go to your repository page
2. Click on the "Manage Repository" button
3. Find the README section (you may need to scroll down)
4. Either:
   - Copy-paste the content of README.docker.md
   - Or use the "GitHub README sync" option if your repository is connected to GitHub

** Multi-Architecture Image (Optional)
#+begin_src bash
# Set up buildx builder
docker buildx create --name mybuilder --use

# Build and push multi-arch image
docker buildx build --platform linux/amd64,linux/arm64 \
  -t yourusername/contemplation-machine:latest \
  --push .
#+end_src

This builds and pushes images for both AMD64 (standard computers) and ARM64 (Apple Silicon, etc.) architectures.

** Verify Publication
#+begin_src bash
# Pull your image from Docker Hub to verify it was published correctly
docker pull yourusername/contemplation-machine:latest

# Run the container to test it
docker run -d \
  --name test-meditation \
  -p 8088:3001 \
  yourusername/contemplation-machine:latest

# Check if container is running
docker ps | grep test-meditation

# Access application at http://localhost:8088 in your browser

# Clean up after testing
docker stop test-meditation
docker rm test-meditation
#+end_src

Your Docker image is now published and available for others to use!
